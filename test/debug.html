<!DOCTYPE html>
<html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>mdeditor test</title>
<style type="text/css">
    html,
    body {
        margin: 0px;
        height: 100%;
        width: 100%;
        font-family: 微软雅黑;
        overflow: hidden;
    }

    .container {
        width: 90%;
        height: 100%;
        margin: auto;
        /* margin-top: 10px; */
    }
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/vs2015.min.css">
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/an-old-hope.min.css"> -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/viewerjs/1.11.5/viewer.min.css">

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_4227162_h0jh3p6td8t.css">
<link rel="stylesheet" href="./../index.css">
<script
    src="https://microget-1300406971.cos.ap-shanghai.myqcloud.com/glicon/lib/shiki/dist/index.jsdelivr.iife.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.8.0/highlight.min.js"></script>
<script src="https://microget-1300406971.cos.ap-shanghai.myqcloud.com/glicon/lib/mermaid.min.js"></script>
<script src="./lib/prettier/standalone.js"></script>
<script src="./lib/prettier/plugins/markdown.js"></script>
<script type="text/javascript" src="./../dist/mdpress-editor.js"></script>
<script type="text/javascript" src="./base.js"></script>
<script>
    var require = { paths: { vs: './lib/monaco-editor/min/vs' } };
</script>
<script src="./lib/monaco-editor/min/vs/loader.js"></script>
<script src="./lib/monaco-editor/min/vs/editor/editor.main.nls.js"></script>
<script src="./lib/monaco-editor/min/vs/editor/editor.main.js"></script>

<body>

    <div id="map" class="container"></div>

    <script>

        let mEditor;
        prettier.prettierPlugins = prettierPlugins;
        mdpress.registerPrettier(prettier);
        function createEditor() {
            mEditor = new mdpress.MDEditor('#map', {
                theme: 'serene-rose',
                monacoOptions: {
                    // language: 'markdown-math'
                    // theme: 'vs-dark'
                }
            })
            mEditor.on('openfullscreen closefullscreen openpreview closepreview themechange', e => {
                console.log(e);
            })
            loadData();
        }

        function loadData() {
            fetch('./data.md').then(res => res.text()).then(text => {
                mEditor.setValue(text);
            })
        }

        mdpress.showLoading();
        init().then(() => {
            mdpress.hideLoading();
            createEditor();
        })
    </script>
</body>

</html>